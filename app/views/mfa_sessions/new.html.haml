- if current_user.google_secret
  - if params.keys.include?("continue-setup")
    %h3 Verify that your Rock the Vote account is properly configured
    %p 
      After adding your Rock the Vote account to your authenticator app, 
      provide the 6-digit code generated by the app to verify that your authentication is working properly.

  - else 
    %p
      Enter the MFA code from your authenticator app.
  = form_tag mfa_sessions_path do
    %p
      %h3
        %label 
          %strong Verification Code: 
          &nbsp;
        = text_field_tag :mfa_code, '', autocomplete: "off"
    - if params.keys.include?("continue-setup")
      = rollover_button(:submit, "Enable Two-Factor Authentication")  
      
    - else
      = rollover_button(:submit, I18n.t('txt.button.submit').html_safe)  
      
- else
  - current_user.set_google_secret()
  %p 
    Rock the Vote now requires two-factor authentication to log in to your account, which adds an extra layer of 
    security to your account. Whenever you sign in to your Rock the Vote account, you’ll now need to enter both 
    your password and a verification code from a mobile authenticator app.
  
  %p
    Follow the steps below to begin the setup process.

  %h3 Step 1: Install an authenticator app
  %p
    Go to your mobile device’s App Store and install an authenticator app. There are several options, including Authy, 
    Duo Mobile, Google Authenticator, or Windows Phone Authenticator. You only need to choose and download one.
  %p
    Download Authy for iPhone 
    =link_to "https://apps.apple.com/us/app/authy/id494168017", "https://apps.apple.com/us/app/authy/id494168017", {rel: "noopener", target: "blank"}
    or 
    %br
    Android 
    =link_to "https://play.google.com/store/apps/details?id=com.authy.authy", "https://play.google.com/store/apps/details?id=com.authy.authy", {rel: "noopener", target: "blank"}
  %p
    Download Google Authenticator for iPhone 
    =link_to "https://apps.apple.com/us/app/google-authenticator/id388497605", "https://apps.apple.com/us/app/google-authenticator/id388497605", {rel: "noopener", target: "blank"}
    or 
    %br
    Android 
    =link_to "https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en_US&gl=US", "https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en_US&gl=US", {rel: "noopener", target: "blank"}


  %h3 Step 2: Add your Rock the Vote acocunt to your authenticator app
  %p Open your authenticator app and add your Rock the Vote account by scanning the following QR code.
  %br
  %img{src: current_user.google_qr_uri }  
  %br
  %p
    If you can’t scan the QR code, you can enter the following setup code instead:
    = current_user.google_secret_value
  %br
  %p
    %strong Do not continue until your authenticator app has been set up!
  %p
    = rollover_image_link("continue-setup", "Continue Setup", "?continue-setup" , id: "continue-setup")